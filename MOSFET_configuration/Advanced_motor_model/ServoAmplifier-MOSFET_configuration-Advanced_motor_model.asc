Version 4
SHEET 1 3328 1812
WIRE -368 -416 -640 -416
WIRE -96 -416 -368 -416
WIRE 160 -416 -96 -416
WIRE -368 -368 -368 -416
WIRE -304 -368 -368 -368
WIRE -368 -352 -368 -368
WIRE -288 -352 -368 -352
WIRE -96 -352 -96 -416
WIRE -16 -352 -96 -352
WIRE 160 -352 160 -416
WIRE 240 -352 160 -352
WIRE -288 -336 -288 -352
WIRE -16 -336 -16 -352
WIRE 240 -336 240 -352
WIRE -416 -272 -448 -272
WIRE -144 -272 -176 -272
WIRE 112 -272 80 -272
WIRE -288 -256 -288 -272
WIRE -288 -256 -368 -256
WIRE -16 -256 -16 -272
WIRE -16 -256 -96 -256
WIRE 240 -256 240 -272
WIRE 240 -256 160 -256
WIRE 1200 -256 1008 -256
WIRE 1232 -256 1200 -256
WIRE -368 -224 -368 -256
WIRE -320 -224 -368 -224
WIRE -224 -224 -320 -224
WIRE 656 -224 -192 -224
WIRE 1200 -224 1008 -224
WIRE 1232 -224 1200 -224
WIRE 656 -176 512 -176
WIRE 1200 -176 1008 -176
WIRE 1232 -176 1200 -176
WIRE -640 -144 -640 -416
WIRE -240 -144 -272 -144
WIRE -208 -144 -208 -208
WIRE -208 -144 -240 -144
WIRE 656 -128 576 -128
WIRE 1200 -128 1008 -128
WIRE 1232 -128 1200 -128
WIRE -96 -96 -96 -256
WIRE -16 -96 -96 -96
WIRE 64 -96 -16 -96
WIRE 512 -96 512 -176
WIRE 512 -96 96 -96
WIRE 1200 -96 1008 -96
WIRE 1232 -96 1200 -96
WIRE 656 -80 624 -80
WIRE 48 -48 16 -48
WIRE 80 -48 80 -80
WIRE 80 -48 48 -48
WIRE 736 16 736 -64
WIRE 768 16 768 -64
WIRE 800 16 800 -64
WIRE 160 32 160 -256
WIRE 272 32 160 32
WIRE 368 32 272 32
WIRE 576 32 576 -128
WIRE 576 32 400 32
WIRE 736 32 736 16
WIRE 768 32 768 16
WIRE 800 32 800 16
WIRE -368 64 -368 -224
WIRE -288 64 -368 64
WIRE -96 64 -96 -96
WIRE -32 64 -96 64
WIRE 160 64 160 32
WIRE 224 64 160 64
WIRE -288 80 -288 64
WIRE -32 80 -32 64
WIRE 224 80 224 64
WIRE 352 80 304 80
WIRE 384 80 384 48
WIRE 384 80 352 80
WIRE -416 144 -448 144
WIRE -144 144 -176 144
WIRE 112 144 80 144
WIRE -288 160 -288 144
WIRE -288 160 -368 160
WIRE -32 160 -32 144
WIRE -32 160 -96 160
WIRE 224 160 224 144
WIRE 224 160 160 160
WIRE 624 160 624 -80
WIRE 624 160 304 160
WIRE 720 208 688 208
WIRE 752 208 720 208
WIRE 688 224 688 208
WIRE -640 240 -640 -64
WIRE -368 240 -368 160
WIRE -368 240 -640 240
WIRE -96 240 -96 160
WIRE -96 240 -368 240
WIRE 160 240 160 160
WIRE 160 240 -96 240
WIRE 688 256 608 256
WIRE 720 256 720 208
WIRE 752 256 752 208
WIRE 848 256 848 -64
WIRE 880 256 880 -64
WIRE 912 256 912 -64
WIRE -96 304 -96 240
WIRE -32 432 -144 432
WIRE 304 432 304 160
WIRE 304 432 -32 432
WIRE 368 464 112 464
WIRE 512 464 432 464
WIRE 848 464 848 448
WIRE 848 464 576 464
WIRE 720 480 720 448
WIRE 720 480 576 480
WIRE 240 560 112 560
WIRE 368 560 304 560
WIRE 512 560 432 560
WIRE 880 560 880 448
WIRE 880 560 576 560
WIRE 752 576 752 448
WIRE 752 576 576 576
WIRE 272 608 272 592
WIRE 320 608 272 608
WIRE 368 656 112 656
WIRE 512 656 432 656
WIRE 912 656 912 448
WIRE 912 656 576 656
WIRE 880 672 880 560
WIRE 880 672 576 672
WIRE 240 752 112 752
WIRE 368 752 304 752
WIRE 512 752 432 752
WIRE 720 752 720 480
WIRE 720 752 576 752
WIRE 688 768 688 448
WIRE 688 768 576 768
WIRE 272 800 272 784
WIRE 320 800 272 800
WIRE 368 848 112 848
WIRE 512 848 432 848
WIRE 752 848 752 576
WIRE 752 848 576 848
WIRE 688 864 688 768
WIRE 688 864 576 864
WIRE 240 944 112 944
WIRE 368 944 304 944
WIRE 512 944 432 944
WIRE 912 944 912 656
WIRE 912 944 576 944
WIRE 848 960 848 464
WIRE 848 960 576 960
WIRE 272 992 272 976
WIRE 320 992 272 992
WIRE 688 1008 688 864
WIRE 720 1008 720 752
WIRE 752 1008 752 848
WIRE 784 1008 784 448
WIRE 816 1008 816 448
WIRE 848 1008 848 960
WIRE 880 1008 880 672
WIRE 912 1008 912 944
FLAG -96 304 0
FLAG 688 224 0
FLAG -320 -224 Pha
FLAG -16 -96 Phb
FLAG 272 32 Phc
FLAG 1200 -256 nr
FLAG 1200 -176 wrpm
FLAG 1200 -224 thetarot
FLAG -240 -144 ia
FLAG 736 16 ea
FLAG 1200 -128 w
FLAG 1200 -96 Te
FLAG 768 16 eb
FLAG 800 16 ec
FLAG 112 464 g0
IOPIN 112 464 Out
FLAG 112 560 g1
IOPIN 112 560 Out
FLAG 112 656 g2
IOPIN 112 656 Out
FLAG 112 752 g3
IOPIN 112 752 Out
FLAG 112 848 g4
IOPIN 112 848 Out
FLAG 112 944 g5
IOPIN 112 944 Out
FLAG -448 144 g0
IOPIN -448 144 In
FLAG -448 -272 g1
IOPIN -448 -272 In
FLAG -176 -272 g3
IOPIN -176 -272 In
FLAG 80 -272 g5
IOPIN 80 -272 In
FLAG -176 144 g2
IOPIN -176 144 In
FLAG 80 144 g4
IOPIN 80 144 In
FLAG -32 432 Tload
FLAG 48 -48 ib
FLAG 352 80 ic
FLAG -304 -368 Vd1
FLAG 320 608 s1
IOPIN 320 608 Out
FLAG 320 800 s3
IOPIN 320 800 Out
FLAG 320 992 s5
IOPIN 320 992 Out
FLAG -368 -224 s1
FLAG -96 -96 s3
FLAG 160 32 s5
SYMBOL voltage -640 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vdc
SYMATTR Value 10
SYMBOL 74HC\\74hc138 976 352 R90
SYMATTR InstName U5
SYMBOL Control\\constant 576 256 R0
WINDOW 3 -5 68 Bottom 2
WINDOW 0 -15 -42 Bottom 2
SYMATTR Value K=5
SYMATTR InstName U3
SYMBOL Digital\\and 544 544 R180
WINDOW 0 3 109 Left 2
SYMATTR InstName A0
SYMBOL Digital\\and 544 640 R180
WINDOW 0 -2 115 Left 2
SYMATTR InstName A1
SYMBOL Control\\idiode -272 -272 R180
WINDOW 0 40 30 Left 2
SYMATTR InstName Ud1
SYMBOL Control\\idiode -272 144 R180
SYMATTR InstName Ud0
SYMBOL Control\\idiode -16 144 R180
SYMATTR InstName Ud2
SYMBOL Control\\idiode 0 -272 R180
WINDOW 0 41 25 Left 2
SYMATTR InstName Ud3
SYMBOL Control\\idiode 256 -272 R180
WINDOW 0 41 33 Left 2
SYMATTR InstName Ud5
SYMBOL Control\\idiode 240 144 R180
SYMATTR InstName Ud4
SYMBOL BLDCM\\bldcm 800 -176 R0
WINDOW 3 6 -192 Bottom 2
WINDOW 123 4 -160 Bottom 2
WINDOW 39 28 -125 Bottom 2
WINDOW 0 -69 -78 Bottom 2
WINDOW 38 86 -81 Bottom 2
SYMATTR Value R=4 L=15u M=0
SYMATTR Value2 npp=4 Kv=9.55e-3
SYMATTR SpiceLine To=0 J=1e-6 Bv=0.13e-3
SYMATTR InstName U2
SYMBOL Control\\isense -208 -224 R0
WINDOW 0 -23 39 Bottom 2
WINDOW 3 32 36 Bottom 2
SYMATTR InstName U1
SYMBOL Digital\\and 544 736 R180
WINDOW 0 -2 115 Left 2
SYMATTR InstName A2
SYMBOL Digital\\and 544 832 R180
WINDOW 0 -2 115 Left 2
SYMATTR InstName A3
SYMBOL Digital\\and 544 928 R180
WINDOW 0 -2 115 Left 2
SYMATTR InstName A4
SYMBOL Digital\\and 544 1024 R180
WINDOW 0 -2 115 Left 2
SYMATTR InstName A5
SYMBOL Control\\constant -176 432 R0
WINDOW 3 -5 68 Bottom 2
WINDOW 0 -22 -71 Bottom 2
WINDOW 38 20 -36 Bottom 2
SYMATTR Value K=0.0
SYMATTR InstName U4
SYMBOL Control\\isense 80 -96 R0
WINDOW 0 28 -13 Bottom 2
WINDOW 3 32 36 Bottom 2
SYMATTR InstName U6
SYMBOL Control\\isense 384 32 R0
WINDOW 0 28 -13 Bottom 2
WINDOW 3 32 36 Bottom 2
SYMATTR InstName U7
SYMBOL nmos -416 -352 R0
WINDOW 0 -66 3 Left 2
WINDOW 3 -123 31 Left 2
SYMATTR InstName M1
SYMATTR Value IRFP250N
SYMBOL nmos -144 -352 R0
WINDOW 0 -64 14 Left 2
WINDOW 3 -112 42 Left 2
SYMATTR InstName M2
SYMATTR Value IRFP250N
SYMBOL nmos 112 -352 R0
WINDOW 0 -69 26 Left 2
WINDOW 3 -108 48 Left 2
SYMATTR InstName M3
SYMATTR Value IRFP250N
SYMBOL nmos -416 64 R0
WINDOW 0 -66 3 Left 2
WINDOW 3 -123 31 Left 2
SYMATTR InstName M4
SYMATTR Value IRFP250N
SYMBOL nmos -144 64 R0
WINDOW 0 -68 14 Left 2
WINDOW 3 -109 42 Left 2
SYMATTR InstName M5
SYMATTR Value IRFP250N
SYMBOL nmos 112 64 R0
WINDOW 0 -65 24 Left 2
WINDOW 3 -111 48 Left 2
SYMATTR InstName M6
SYMATTR Value IRFP250N
SYMBOL Control\\gain 400 464 M0
SYMATTR InstName U8
SYMATTR Value A={Vgs}
SYMBOL Control\\gain 400 560 M0
SYMATTR InstName U9
SYMATTR Value A={Vgs}
SYMBOL Control\\gain 400 656 M0
SYMATTR InstName U10
SYMATTR Value A={Vgs}
SYMBOL Control\\gain 400 752 M0
SYMATTR InstName U11
SYMATTR Value A={Vgs}
SYMBOL Control\\gain 400 848 M0
SYMATTR InstName U12
SYMATTR Value A={Vgs}
SYMBOL Control\\gain 400 944 M0
SYMATTR InstName U13
SYMATTR Value A={Vgs}
SYMBOL Control\\adder2 272 560 M0
WINDOW 0 4 -42 Bottom 2
SYMATTR InstName U14
SYMBOL Control\\adder2 272 752 M0
WINDOW 0 1 -32 Bottom 2
SYMATTR InstName U16
SYMBOL Control\\adder2 272 944 M0
WINDOW 0 -4 -33 Bottom 2
SYMATTR InstName U18
TEXT 344 -376 Left 2 !.tran 0 100m 50m uic
TEXT 992 368 Left 2 !.inc 74HC.lib
TEXT 344 -344 Left 2 !.options reltol=1m
TEXT 744 360 Left 2 ;74HC138
TEXT 304 1032 Left 2 !.param Vgs=4.5
